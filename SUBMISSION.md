# گزارش تحویل پروژه Reflex

## مشخصات اعضای تیم

### کوشا معینی
- **شماره دانشجویی:** 401100228
- **وظایف:** Step 1 و Step 2

### آرمان آریان‌پور
- **شماره دانشجویی:** 401170072
- **وظایف:** Step 3 و Step 4

---

## فعالیت‌های انجام شده توسط کوشا معینی

### Step 1: ساختار اولیه و پیکربندی
در این مرحله، اسکلت اصلی پروتکل Reflex در هسته Xray بنا شد:
- ایجاد پکیج `reflex` در مسیر `xray-core/proxy/reflex`.
- تعریف ساختارهای داده برای تنظیمات ورودی (Inbound) و خروجی (Outbound).
- ثبت پروتکل در لیست توزیع Xray در فایل `main/distro/all/all.go`.

### Step 2: فرآیند Handshake و احراز هویت
در این مرحله، منطق ایجاد ارتباط امن و پنهان پیاده‌سازی شد:
- پیاده‌سازی Handshake ضمنی (Implicit Handshake) برای ناشناس ماندن ترافیک.
- استفاده از تبادل کلید `X25519`.
- پیاده‌سازی سیستم احراز هویت بر اساس `UUID`.
- استفاده از `HKDF` برای استخراج کلیدهای نشست.

---

## فعالیت‌های انجام شده توسط آرمان آریان‌پور

### Step 3: Traffic Morphing (پنهان‌سازی ترافیک)
توی این بخش کاری که کردم این بود که ترافیک رو شبیه HTTP معمولی کنم تا فایروال‌ها و DPI نتونن تشخیص بدن که این یه پروکسی هست:
- یه تابع نوشتم که داده‌های ریفلکس رو می‌گیره و یه سری header های HTTP بهش اضافه می‌کنه.
- برای اینکه واقعی‌تر باشه، از User-Agent و Content-Type و اینا استفاده کردم.
- یه random padding هم اضافه کردم که سایز واقعی بسته‌ها مشخص نباشه.
- در آخر هم یه سری تست نوشتم که چک کنه morphing درست کار می‌کنه یا نه.

### Step 4: تست‌های مختلف
اینجا هدف این بود که همه قسمت‌های کد رو با تست بپوشونیم:
- Unit Test ها رو نوشتم برای تابع‌های اصلی مثل handshake و encryption و اینا.
- یه سری Edge Case Test هم گذاشتم برای حالت‌های خاص مثل ورودی خالی، داده خیلی بزرگ و این چیزا.
- Benchmark Test هم نوشتم که ببینیم چقدر سریع کار می‌کنه و کجاها کنده.
- Fuzz Test هم اضافه کردم که ورودی‌های تصادفی بده و ببینه برنامه crash می‌کنه یا نه.
- یه سری Example Test هم گذاشتم که وقتی کسی می‌خواد استفاده کنه بفهمه چجوری باید ازش استفاده کنه.
