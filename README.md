# پروژه Reflex - کوشا معینی، آرمان آریان‌پور، پارسا غلامی

## شماره دانشجویی
* 401100228 -- کوشا معینی
* 401170072 -- آرمان آریان‌پور
* 401100477 -- پارسا غلامی

## توضیحات
این پروژه پیاده‌سازی پروتکل Reflex در هسته Xray هست. هدف ما طراحی پروتکلی بود که در کنار امنیت بالا، رفتاری بسیار شبیه به ترافیک عادی شبکه (مثل HTTPS) داشته باشه تا به سادگی توسط سیستم‌های فیلترینگ شناسایی نشه. برای رسیدن به این هدف، از تبادل کلید مخفی، رمزنگاری پیشرفته ChaCha20 و مکانیزم‌های Traffic Morphing استفاده کردیم.

## نحوه اجرا
برای اجرای پروژه، ابتدا مطمئن بشید که Go رو سیستمتون نصبه. بعد مراحل زیر رو برید:
1. پوشه `xray-core/main` رو باز کنید.
2. دستور `go build` رو اجرا کنید تا فایل اجرایی ساخته بشه.
3. با استفاده از فایل کانفیگ نمونه، پروژه رو اجرا کنید:
```bash
./main -config ../../config.example.json
```
جزئیات بیشتر تنظیمات در فایل `config.example.json` موجوده.

## مشکلات و راه‌حل‌ها
یکی از بزرگترین دردسرهای ما، هندل کردن `bufio.Peek` در بخش Inbound بود. چون می‌خواستیم اگر پکت مربوط به پروتکل ما نبود، اون رو به Fallback پاس بدیم، نباید هیچ بایتی از استریم اصلی کسر می‌شد. بالاخره با چند بار بازنویسی بخش منطق شرطی، تونستیم بدون لو رفتن هویت پروکسی، ترافیک رو تفکیک کنیم. مشکل دیگه‌ای که داشتیم، هماهنگ کردن تست‌های یکپارچگی با سیستم جاج بود که با اصلاح مسیر فایل‌ها و اضافه کردن متغیرهای محیطی حل شد.
